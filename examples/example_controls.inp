[CONTROLS]

; Simple time-based pump control
RULE R1
IF SIMULATION TIME > 8
THEN PUMP 12 STATUS = ON
ELSE PUMP 12 STATUS = OFF

; Multi-condition orifice gate control
RULE R2A
IF NODE 23 DEPTH > 12
AND LINK 165 FLOW > 100
THEN ORIFICE R55 SETTING = 0.5

RULE R2B
IF NODE 23 DEPTH > 12
AND LINK 165 FLOW > 200
THEN ORIFICE R55 SETTING = 1.0

RULE R2C
IF NODE 23 DEPTH <= 12
OR LINK 165 FLOW <= 100
THEN ORIFICE R55 SETTING = 0

; PID controller that attempts to keep Node 23â€™s depth at 12:
RULE PID_1
IF NODE 23 DEPTH <> 12
THEN ORIFICE R55 SETTING = PID 0.5 0.1 0.0

; Pump station operation with a main (N1A) and lag (N1B) pump
RULE R3A
IF NODE N1 DEPTH > 5
THEN PUMP N1A STATUS = ON

RULE R3B
IF PUMP N1A TIMEOPEN > 2:30
THEN PUMP N1B STATUS = ON
ELSE PUMP N1B STATUS = OFF

RULE R3C
IF NODE N1 DEPTH <= 0.5
THEN PUMP N1A STATUS = OFF
AND PUMP N1B STATUS = OFF

; --------------------------------
; FUILO
RULE A1_INIT
IF SIMULATION TIME = 0
THEN WEIR W_K3 SETTING = 0.24
AND WEIR W_K2 SETTING = 0.24
AND ORIFICE O_K1_MUR SETTING = 0
AND WEIR W_K1_O1 SETTING = 1
AND WEIR W_K1_O2 SETTING = 1
AND ORIFICE O_K0_MUEB SETTING = 0
AND WEIR O_K0_DR SETTING = 0
AND WEIR W_K1_O3 SETTING = 1
PRIORITY 1000
